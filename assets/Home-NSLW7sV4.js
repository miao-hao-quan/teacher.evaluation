import{u as ce,a as se,r as ae,c as H,b as z,o as re,d as p,e as c,f as u,g as O,w as h,h as f,F as T,i as x,t as g,n as ue,j as he,k as oe,l as m,m as _,_ as be}from"./index-DcrgWPdY.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J=JSON.parse('[{"classId":"22级1班","courses":[{"teacher":"王晓明","subject":"内护"},{"teacher":"张倩洁","subject":"外护"},{"teacher":"刘姜萍","subject":"妇护"},{"teacher":"高颖","subject":"儿护"},{"teacher":"王岩","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"黄庭欢","subject":"护理实训"}]},{"classId":"22级2班","courses":[{"teacher":"洪燕","subject":"内护"},{"teacher":"张倩洁","subject":"外护"},{"teacher":"刘姜萍","subject":"妇护"},{"teacher":"高颖","subject":"儿护"},{"teacher":"王岩","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"王淑英","subject":"护理实训"}]},{"classId":"22级3班","courses":[{"teacher":"刘静","subject":"内护"},{"teacher":"崔颖","subject":"外护"},{"teacher":"刘姜萍","subject":"妇护"},{"teacher":"毕志伟","subject":"儿护"},{"teacher":"王岩","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"王淑英","subject":"护理实训"}]},{"classId":"22级4班","courses":[{"teacher":"安雯","subject":"内护"},{"teacher":"崔颖","subject":"外护"},{"teacher":"王婷婷","subject":"妇护"},{"teacher":"毕志伟","subject":"儿护"},{"teacher":"王岩","subject":"中护"},{"teacher":"王蓉","subject":"急救"},{"teacher":"张咪咪","subject":"护理实训"}]},{"classId":"22级5班","courses":[{"teacher":"崔娜","subject":"内护"},{"teacher":"徐玉旺","subject":"外护"},{"teacher":"王婷婷","subject":"妇护"},{"teacher":"毕志伟","subject":"儿护"},{"teacher":"杨海静","subject":"中护"},{"teacher":"王蓉","subject":"急救"},{"teacher":"张咪咪","subject":"护理实训"}]},{"classId":"22级6班","courses":[{"teacher":"李洁","subject":"内护"},{"teacher":"时福霞","subject":"外护"},{"teacher":"王婷婷","subject":"妇护"},{"teacher":"刘程程","subject":"儿护"},{"teacher":"杨海静","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"黄庭欢","subject":"护理实训"}]},{"classId":"22级7班","courses":[{"teacher":"房小飞","subject":"内护"},{"teacher":"温佃敏","subject":"外护"},{"teacher":"王琳","subject":"妇护"},{"teacher":"刘程程","subject":"儿护"},{"teacher":"杨海静","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"聂圣娟","subject":"护理实训"}]},{"classId":"22级8班","courses":[{"teacher":"姜姝彤","subject":"内护"},{"teacher":"温佃敏","subject":"外护"},{"teacher":"王琳","subject":"妇护"},{"teacher":"刘程程","subject":"儿护"},{"teacher":"杨海静","subject":"中护"},{"teacher":"王蓉","subject":"急救"},{"teacher":"崔雪艳","subject":"护理实训"}]},{"classId":"22级9班","courses":[{"teacher":"王金萍","subject":"中妇/饮食养生"},{"teacher":"刘群","subject":"中内"},{"teacher":"张晓新","subject":"养生康复/运动养生"},{"teacher":"姜志云","subject":"情志养生"},{"teacher":"陈功成","subject":"体育"}]},{"classId":"23级1班","courses":[{"teacher":"张岩","subject":"外语"},{"teacher":"杨春燕","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"柳聪颖","subject":"健评"},{"teacher":"满晓玲","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"柳聪颖","subject":"病理"},{"teacher":"刘旭","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于明艺","subject":"护管"},{"teacher":"安雯","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级2班","courses":[{"teacher":"林萍","subject":"外语"},{"teacher":"杨春燕","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"柳聪颖","subject":"健评"},{"teacher":"满晓玲","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"柳聪颖","subject":"病理"},{"teacher":"侯立娟","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"黄庭欢","subject":"护管"},{"teacher":"安雯","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级3班","courses":[{"teacher":"林萍","subject":"外语"},{"teacher":"李文丽","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"尹小艳","subject":"健评"},{"teacher":"满晓玲","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"柳聪颖","subject":"病理"},{"teacher":"侯立娟","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"黄庭欢","subject":"护管"},{"teacher":"安雯","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级4班","courses":[{"teacher":"林萍","subject":"外语"},{"teacher":"李文丽","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"尹小艳","subject":"健评"},{"teacher":"郭桂宇","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"侯立娟","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"黄庭欢","subject":"护管"},{"teacher":"崔娜","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级5班","courses":[{"teacher":"张荣荣","subject":"外语"},{"teacher":"李文丽","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"杨银田","subject":"健评"},{"teacher":"李玉萍","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"侯立娟","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于超然","subject":"护管"},{"teacher":"崔娜","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级6班","courses":[{"teacher":"张荣荣","subject":"外语"},{"teacher":"李文丽","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"王晓燕","subject":"健评"},{"teacher":"李玉萍","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"李雪","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于超然","subject":"护管"},{"teacher":"崔娜","subject":"精护"},{"teacher":"于超然","subject":"心理"}]},{"classId":"23级7班","courses":[{"teacher":"张荣荣","subject":"外语"},{"teacher":"王秀梅","subject":"信息"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"王晓燕","subject":"健评"},{"teacher":"郭桂宇","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"柳聪颖","subject":"病理"},{"teacher":"李雪","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于超然","subject":"护管"},{"teacher":"李洁","subject":"精护"},{"teacher":"于超然","subject":"心理"}]},{"classId":"23级8班","courses":[{"teacher":"张岩","subject":"外语"},{"teacher":"王秀梅","subject":"信息"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"王晓燕","subject":"健评"},{"teacher":"陈欣悦","subject":"药理"},{"teacher":"宋荣荣","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"李雪","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于超然","subject":"护管"},{"teacher":"李洁","subject":"精护"},{"teacher":"于超然","subject":"心理"}]},{"classId":"23级9班","courses":[{"teacher":"卢静","subject":"外语"},{"teacher":"王一笑","subject":"信息"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"王晓燕","subject":"健评"},{"teacher":"陈欣悦","subject":"药理"},{"teacher":"宋荣荣","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"李雪","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于明艺","subject":"护管"},{"teacher":"李洁","subject":"精护"},{"teacher":"于超然","subject":"心理"}]},{"classId":"23级10班","courses":[{"teacher":"王一笑","subject":"信息"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"宋荣荣","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"张晓新","subject":"小儿推拿/针灸"},{"teacher":"曹颖","subject":"方剂"}]},{"classId":"24级1班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"杨家明","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"于凯琳","subject":"英语"},{"teacher":"王道玮","subject":"体育"},{"teacher":"张英超","subject":"生化"},{"teacher":"颜美双","subject":"生理"},{"teacher":"刘翠翠","subject":"病原"},{"teacher":"聂圣娟","subject":"护基"}]},{"classId":"24级2班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"宋春意","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"丛珂","subject":"英语"},{"teacher":"王道玮","subject":"体育"},{"teacher":"张英超","subject":"生化"},{"teacher":"颜美双","subject":"生理"},{"teacher":"刘翠翠","subject":"病原"},{"teacher":"侯立娟","subject":"护基"}]},{"classId":"24级3班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"宋春意","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"丛珂","subject":"英语"},{"teacher":"姜志云","subject":"中医养生基础3班"},{"teacher":"颜美双","subject":"营养"},{"teacher":"曹颖","subject":"中药方剂"},{"teacher":"杜沅芷","subject":"经络"},{"teacher":"王金萍","subject":"中医临床医学"}]},{"classId":"24级4班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"杨家明","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"丛珂","subject":"英语"},{"teacher":"王道玮","subject":"体育"},{"teacher":"曹颖","subject":"中药方剂"},{"teacher":"郭桂宇","subject":"康复概论"},{"teacher":"姜志云","subject":"小儿推拿"},{"teacher":"刘翠翠","subject":"诊断学"}]},{"classId":"24级5班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"王一笑","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"刘群","subject":"中药方剂/养生康复"},{"teacher":"杜沅芷","subject":"经络"},{"teacher":"时福霞","subject":"常见病康复"},{"teacher":"张英超","subject":"疾病概要"},{"teacher":"姜志云","subject":"推拿"}]},{"classId":"24级6班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"王淑英","subject":"护基"},{"teacher":"洪燕","subject":"内护"},{"teacher":"刘雯","subject":"外护"},{"teacher":"王琳","subject":"妇护"},{"teacher":"毕志伟","subject":"儿护"}]},{"classId":"24级7班","courses":[{"teacher":"周婉迪","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"王一笑","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"李雪","subject":"护基"},{"teacher":"刘静","subject":"内护"},{"teacher":"刘雯","subject":"外护"},{"teacher":"王琳","subject":"妇护"},{"teacher":"刘程程","subject":"儿护"}]},{"classId":"24级8班","courses":[{"teacher":"周婉迪","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"崔雪艳","subject":"护基"},{"teacher":"姜姝彤","subject":"内护"},{"teacher":"刘雯","subject":"外护"},{"teacher":"王婷婷","subject":"妇护"},{"teacher":"高颖","subject":"儿护"}]},{"classId":"24级9班","courses":[{"teacher":"周婉迪","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"张荣荣","subject":"日语"},{"teacher":"王蓉","subject":"生活照料"},{"teacher":"聂圣娟","subject":"技术护理"},{"teacher":"王威","subject":"老年评估"}]},{"classId":"25级1班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"周婉迪","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"林卫卫","subject":"英语"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"肖飞","subject":"物理"},{"teacher":"林卫卫","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"王建春","subject":"生物"},{"teacher":"周光","subject":"解剖"},{"teacher":"谢佳蕾","subject":"党史国史/国家安全教育/中特读本"}]},{"classId":"25级2班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"周婉迪","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"肖飞","subject":"物理"},{"teacher":"林卫卫","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"孙宁宁","subject":"生物"},{"teacher":"张钰","subject":"解剖"},{"teacher":"谢佳蕾","subject":"党史国史/国家安全教育/中特读本"}]},{"classId":"25级3班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"张赛楠","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"肖飞","subject":"物理"},{"teacher":"杨羽佳","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"宋荣荣","subject":"生物"},{"teacher":"王威","subject":"解剖"},{"teacher":"谢佳蕾","subject":"党史国史/国家安全教育/中特读本"}]},{"classId":"25级4班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"张赛楠","subject":"语文"},{"teacher":"王子晗","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"杨羽佳","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"谢佳蕾","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"杜沅芷","subject":"中医学基础"},{"teacher":"杨银田","subject":"解剖生理学基础"}]},{"classId":"25级5班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"杨家明","subject":"语文"},{"teacher":"王子晗","subject":"数学"},{"teacher":"卢静","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"杨羽佳","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"郐恬瑶","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"杜沅芷","subject":"中医学基础"},{"teacher":"杨银田","subject":"解剖生理学基础"}]},{"classId":"25级6班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"宋春意","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"卢静","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"林卫卫","subject":"化学"},{"teacher":"李珍珠","subject":"历史"},{"teacher":"郐恬瑶","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"杜沅芷","subject":"中医学基础"},{"teacher":"杨银田","subject":"解剖生理学基础"}]},{"classId":"25级7班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"王玲玲","subject":"语文"},{"teacher":"张赛楠","subject":"语文"},{"teacher":"王一笑","subject":"数学"},{"teacher":"卢静","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"林卫卫","subject":"化学"},{"teacher":"李珍珠","subject":"历史"},{"teacher":"郐恬瑶","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"刘群","subject":"中医学基础"}]},{"classId":"25级8班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"王玲玲","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"林卫卫","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"于军良","subject":"化学"},{"teacher":"李珍珠","subject":"历史"},{"teacher":"郐恬瑶","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"杨海静","subject":"老年人体结构与机能"},{"teacher":"马晓璇","subject":"老年人心理基础"}]},{"classId":"25级9班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"王玲玲","subject":"语文"},{"teacher":"王子晗","subject":"数学"},{"teacher":"李贇","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"杨羽佳","subject":"化学"},{"teacher":"李珍珠","subject":"历史"},{"teacher":"尹小艳","subject":"解剖"},{"teacher":"毕思美","subject":"美术"},{"teacher":"李文丽","subject":"信息技术"},{"teacher":"杨海静","subject":"生理学基础"}]}]'),D=[{category:"一、德",questions:[{id:"1",content:"衣着、言谈大方得体，举止文明，教态亲切。"},{id:"2",content:"老师对我们的评价以肯定鼓励表扬为主，使我们学习更有信心。"},{id:"3",content:"尊重每一个学生，处理事情让我心服口服，不偏不倚。"},{id:"4",content:"认真对待每一节课，上课时精神饱满，能够让我有所获。"}]},{category:"二、勤",questions:[{id:"1",content:"教师按时上课，课前准备充分，引导我有序地学习。"},{id:"2",content:"经常和我们平等地交流，在学习和生活方面加以引导，对我们反映的问题认真对特，及时解决。"},{id:"3",content:"上课不迟到、不早退，中途不无故离开课堂，上课不抽烟，不接打电话。不坐着上课。"},{id:"4",content:"批改作业认真，并有批语。"}]},{category:"三、能",questions:[{id:"1",content:"能有效管理学生并及时处理课堂突发事件，我们在课堂上秩序良好。"},{id:"2",content:"能及时发现我们在学习、生活等各方面的困难并帮助解决。"},{id:"3.1",content:"上课后，老师能引导我快速进入学习状态。"},{id:"3.2",content:"课上教师讲解清楚，普通话授课，语言准确、生动，同时使我们掌握学习的方法并能举一反三。"},{id:"3.3",content:"课堂内容丰富，技能操作规范、熟练。"},{id:"3.4",content:"每一节谍中，都有适合我参与的内容。"},{id:"3.5",content:"板书设计合理、工整，让我一目了然。"},{id:"3.6",content:"解答我的问题时耐心细致，经常鼓励我们。"},{id:"4",content:"具有良好的师生沟通能力，与学生关系融洽。"}]},{category:"四、导",questions:[{id:"1",content:"引导我们热爱专业，树立高尚的职业道德观念。"},{id:"2",content:"引导我们树立健康的心态，增加学习兴趣。"},{id:"3",content:"引导我们进行有效的学习，提高学习效率。"}]}],je={class:"evaluation-container"},ne={class:"form-item-wrapper"},ie={class:"form-item-wrapper"},de={class:"form-item-wrapper"},ve={key:0,class:"evaluation-blocks"},pe={class:"teacher-card-header"},fe={class:"teacher-info"},me={class:"subject-badge"},_e={class:"teacher-name"},ge={class:"score-value"},we={class:"score-label"},Ie={class:"questions-container"},ye={class:"category-title"},ke={class:"question-content"},Se={class:"question-id"},Ce={class:"question-text"},$e={class:"teacher-card-footer"},Ee={key:1,class:"submit-section"},Ne={__name:"Home",setup(De){const U=oe(),j=ce(),A=se(),s=ae({classId:null,timestamp:null,studentName:"",time:""}),B=t=>{if(t){const e=new Date(t);s.time=`${e.getFullYear()}年${e.getMonth()+1}月${e.getDate()}日`}else s.time="";C()},q=H(()=>{let t=0;return D.forEach(e=>{t+=e.questions.length}),t}),P=H(()=>J.map(t=>({label:t.classId,value:t.classId}))),r=z([]),d=z([]),o=z([]),R=()=>{d.value=r.value.map(()=>({})),o.value=r.value.map(()=>null)},X=t=>{const e=J.find(b=>b.classId===t);e&&(r.value=e.courses,R(),G()),C()},L=t=>t>=90?"优秀":t>=80?"良好":t>=70?"合格":"不合格",K=t=>t>=90?"success":t>=80?"info":t>=70?"warning":"error",M=t=>{const e=d.value[t],b=Object.values(e);if(b.length<q.value)return j.warning("请完成所有题目后再计算得分"),null;const a=b.reduce((k,$)=>k+$,0),n=Math.round(a/(q.value*5)*100);return o.value[t]=n,C(),j.success(`${r.value[t].teacher}老师得分：${n}分`),n},F=()=>{let t=!0;r.value.forEach((e,b)=>{M(b)===null&&(t=!1)}),t&&j.success("所有教师得分计算完成")},Q=()=>{if(!s.classId)return j.error("请选择班级"),!1;if(!s.studentName.trim())return j.error("请输入学生姓名"),!1;if(!s.timestamp)return j.error("请选择日期"),!1;for(let a=0;a<r.value.length;a++){const n=d.value[a];if(Object.keys(n).length<q.value)return j.error(`请完成 ${r.value[a].teacher} 老师的所有评教题目`),!1}F();const t={};let e=!1;if(o.value.forEach(a=>{a===100&&(e=!0),t[a]=(t[a]||0)+1}),e)return j.error("评教分数不能出现满分(100分)，请返回修改"),!1;for(const a in t)if(t[a]>=3)return j.error(`检测到有${t[a]}个教师得分相同(${a}分)，不能有三个及以上相同分数，请返回修改`),!1;const b=[];return o.value.forEach((a,n)=>{a<80&&b.push(r.value[n].teacher)}),b.length>0?(A.warning({title:"分数较低提醒",content:`系统检测到您给以下教师的打分较低（低于80分）：${b.join("、")}。请返回修改评分。`,positiveText:"返回修改",maskClosable:!1,closable:!1,onPositiveClick:()=>{}}),!1):!0},W=async()=>{const t=await be(()=>import("./xlsx-CNerDvZX.js"),[],import.meta.url),e=s.time,b=`${s.classId}${s.studentName}同学${e}评教.xlsx`,a=t.utils.book_new(),n=["总分","等级","班级","学生姓名","任课教师","任教科目"];D.forEach((l,S)=>{l.questions.forEach(I=>{n.push(`${l.category}.${I.id}.${I.content}`)})});const k=[];r.value.forEach((l,S)=>{const I=[o.value[S],L(o.value[S]),s.classId,s.studentName,l.teacher,l.subject];D.forEach((v,i)=>{v.questions.forEach(E=>{const N=`${i}-${E.id}`,y=d.value[S][N]||0;I.push(y)})}),k.push(I)});const $=[n,...k],w=t.utils.aoa_to_sheet($),V=[{wch:10},{wch:10},{wch:18},{wch:15},{wch:18},{wch:18}];D.forEach(l=>{l.questions.forEach(()=>{V.push({wch:50})})}),w["!cols"]=V,t.utils.book_append_sheet(a,w,"评教数据"),t.writeFile(a,b)},Y=async()=>{if(Q())try{await W(),j.success("评教数据导出成功");const t={classId:s.classId,studentName:s.studentName,time:s.time,teacherCount:r.value.length};localStorage.setItem("evaluationResult",JSON.stringify(t)),localStorage.removeItem("teacherEvaluation"),U.push("/result")}catch(t){j.error("导出失败："+t.message)}},C=()=>{const t={formData:{...s},answers:d.value,scores:o.value,currentCourses:r.value};localStorage.setItem("teacherEvaluation",JSON.stringify(t))},G=()=>{const t=localStorage.getItem("teacherEvaluation");if(t)try{const e=JSON.parse(t);e.formData.classId===s.classId&&(Object.assign(s,e.formData),e.answers&&e.answers.length===r.value.length&&(d.value=e.answers),e.scores&&e.scores.length===r.value.length&&(o.value=e.scores))}catch(e){console.error("加载数据失败",e)}},Z=()=>{const t=localStorage.getItem("teacherEvaluation");if(t)try{const e=JSON.parse(t);Object.assign(s,e.formData),e.currentCourses&&(r.value=e.currentCourses),e.answers&&(d.value=e.answers),e.scores&&(o.value=e.scores)}catch(e){console.error("初始化加载失败",e)}},ee=()=>{A.warning({title:"确认清除",content:"确定要清除所有评教数据吗？此操作不可恢复。",positiveText:"确定清除",negativeText:"取消",onPositiveClick:()=>{localStorage.removeItem("teacherEvaluation"),s.classId=null,s.timestamp=null,s.studentName="",s.time="",r.value=[],d.value=[],o.value=[],j.success("数据已清除")}})};return re(()=>{Z()}),(t,e)=>{const b=f("n-select"),a=f("n-gi"),n=f("n-input"),k=f("n-date-picker"),$=f("n-grid"),w=f("n-button"),V=f("n-card"),l=f("n-radio"),S=f("n-space"),I=f("n-radio-group");return m(),p("div",je,[e[15]||(e[15]=c("div",{class:"page-header"},[c("h1",{class:"page-title"},"教师评教"),c("p",{class:"page-subtitle"},"请认真、客观地完成教师评价")],-1)),u(V,{class:"header-card",bordered:!1},{footer:h(()=>[u(w,{text:"",type:"error",onClick:ee},{icon:h(()=>[...e[6]||(e[6]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16"},[c("path",{d:"M7 4V2h10v2h5v2h-2v15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6H2V4h5zM6 6v14h12V6H6zm3 3h2v8H9V9zm4 0h2v8h-2V9z"})],-1)])]),default:h(()=>[e[7]||(e[7]=_(" 清除所有数据 ",-1))]),_:1})]),default:h(()=>[u($,{cols:1,"x-gap":12,"y-gap":16,responsive:"screen","collapsed-rows":3},{default:h(()=>[u(a,{span:1},{default:h(()=>[c("div",ne,[e[3]||(e[3]=c("label",{class:"form-label"},[c("span",{class:"label-text"},"选择班级"),c("span",{class:"label-required"},"*")],-1)),u(b,{value:s.classId,"onUpdate:value":[e[0]||(e[0]=v=>s.classId=v),X],options:P.value,placeholder:"请选择班级",filterable:"",size:"large"},null,8,["value","options"])])]),_:1}),u(a,{span:1},{default:h(()=>[c("div",ie,[e[4]||(e[4]=c("label",{class:"form-label"},[c("span",{class:"label-text"},"学生姓名"),c("span",{class:"label-required"},"*")],-1)),u(n,{value:s.studentName,"onUpdate:value":[e[1]||(e[1]=v=>s.studentName=v),C],placeholder:"请输入姓名",size:"large"},null,8,["value"])])]),_:1}),u(a,{span:1},{default:h(()=>[c("div",de,[e[5]||(e[5]=c("label",{class:"form-label"},[c("span",{class:"label-text"},"选择日期"),c("span",{class:"label-required"},"*")],-1)),u(k,{value:s.timestamp,"onUpdate:value":[e[2]||(e[2]=v=>s.timestamp=v),B],type:"date",placeholder:"请选择日期",size:"large",format:"yyyy年M月d日"},null,8,["value"])])]),_:1})]),_:1})]),_:1}),r.value.length>0?(m(),p("div",ve,[(m(!0),p(T,null,x(r.value,(v,i)=>(m(),p("div",{key:i,class:"teacher-card"},[c("div",pe,[c("div",fe,[c("span",me,g(v.subject),1),c("span",_e,g(v.teacher),1)]),o.value[i]!==null?(m(),p("div",{key:0,class:ue(["score-display",`score-${K(o.value[i])}`])},[c("span",ge,g(o.value[i]),1),c("span",we,g(L(o.value[i])),1)],2)):O("",!0)]),c("div",Ie,[(m(!0),p(T,null,x(he(D),(E,N)=>(m(),p("div",{key:N,class:"category-block"},[c("div",ye,g(E.category),1),(m(!0),p(T,null,x(E.questions,y=>(m(),p("div",{key:y.id,class:"question-item"},[c("div",ke,[c("span",Se,g(y.id)+".",1),c("span",Ce,g(y.content),1)]),u(I,{value:d.value[i][`${N}-${y.id}`],"onUpdate:value":[te=>d.value[i][`${N}-${y.id}`]=te,C],class:"radio-group"},{default:h(()=>[u(S,{size:8},{default:h(()=>[u(l,{value:1,class:"score-radio"},{default:h(()=>[...e[8]||(e[8]=[_("1分",-1)])]),_:1}),u(l,{value:2,class:"score-radio"},{default:h(()=>[...e[9]||(e[9]=[_("2分",-1)])]),_:1}),u(l,{value:3,class:"score-radio"},{default:h(()=>[...e[10]||(e[10]=[_("3分",-1)])]),_:1}),u(l,{value:4,class:"score-radio"},{default:h(()=>[...e[11]||(e[11]=[_("4分",-1)])]),_:1}),u(l,{value:5,class:"score-radio"},{default:h(()=>[...e[12]||(e[12]=[_("5分",-1)])]),_:1})]),_:1})]),_:1},8,["value","onUpdate:value"])]))),128))]))),128))]),c("div",$e,[u(w,{type:"primary",size:"large",block:"",onClick:E=>M(i)},{default:h(()=>[_(" 计算"+g(r.value[i].teacher)+"老师得分 ",1)]),_:2},1032,["onClick"])])]))),128))])):O("",!0),r.value.length>0?(m(),p("div",Ee,[u(w,{type:"warning",size:"large",block:"",onClick:F,class:"submit-button"},{default:h(()=>[...e[13]||(e[13]=[_(" 计算所有教师得分 ",-1)])]),_:1}),u(w,{type:"primary",size:"large",block:"",onClick:Y,class:"submit-button submit-button-main"},{default:h(()=>[...e[14]||(e[14]=[_(" 提交并导出评教数据 ",-1)])]),_:1})])):O("",!0)])}}},ze=le(Ne,[["__scopeId","data-v-01a23e9f"]]);export{ze as default};
