import{_ as te,u as ce,a as se,r as ae,c as M,b as z,o as re,d as v,e as c,f as h,g as O,w as b,h as f,F as T,i as q,t as w,n as ue,j as he,k as be,l as p,m as _,p as oe}from"./index-B-GWTzsH.js";const x=JSON.parse('[{"classId":"测试","courses":[{"teacher":"王晓明","subject":"内护"},{"teacher":"黄庭欢","subject":"护理实训"}]},{"classId":"22级1班","courses":[{"teacher":"王晓明","subject":"内护"},{"teacher":"张倩洁","subject":"外护"},{"teacher":"刘姜萍","subject":"妇护"},{"teacher":"高颖","subject":"儿护"},{"teacher":"王岩","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"黄庭欢","subject":"护理实训"}]},{"classId":"22级2班","courses":[{"teacher":"洪燕","subject":"内护"},{"teacher":"张倩洁","subject":"外护"},{"teacher":"刘姜萍","subject":"妇护"},{"teacher":"高颖","subject":"儿护"},{"teacher":"王岩","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"王淑英","subject":"护理实训"}]},{"classId":"22级3班","courses":[{"teacher":"刘静","subject":"内护"},{"teacher":"崔颖","subject":"外护"},{"teacher":"刘姜萍","subject":"妇护"},{"teacher":"毕志伟","subject":"儿护"},{"teacher":"王岩","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"王淑英","subject":"护理实训"}]},{"classId":"22级4班","courses":[{"teacher":"安雯","subject":"内护"},{"teacher":"崔颖","subject":"外护"},{"teacher":"王婷婷","subject":"妇护"},{"teacher":"毕志伟","subject":"儿护"},{"teacher":"王岩","subject":"中护"},{"teacher":"王蓉","subject":"急救"},{"teacher":"张咪咪","subject":"护理实训"}]},{"classId":"22级5班","courses":[{"teacher":"崔娜","subject":"内护"},{"teacher":"徐玉旺","subject":"外护"},{"teacher":"王婷婷","subject":"妇护"},{"teacher":"毕志伟","subject":"儿护"},{"teacher":"杨海静","subject":"中护"},{"teacher":"王蓉","subject":"急救"},{"teacher":"张咪咪","subject":"护理实训"}]},{"classId":"22级6班","courses":[{"teacher":"李洁","subject":"内护"},{"teacher":"时福霞","subject":"外护"},{"teacher":"王婷婷","subject":"妇护"},{"teacher":"刘程程","subject":"儿护"},{"teacher":"杨海静","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"黄庭欢","subject":"护理实训"}]},{"classId":"22级7班","courses":[{"teacher":"房小飞","subject":"内护"},{"teacher":"温佃敏","subject":"外护"},{"teacher":"王琳","subject":"妇护"},{"teacher":"刘程程","subject":"儿护"},{"teacher":"杨海静","subject":"中护"},{"teacher":"张咪咪","subject":"急救"},{"teacher":"聂圣娟","subject":"护理实训"}]},{"classId":"22级8班","courses":[{"teacher":"姜姝彤","subject":"内护"},{"teacher":"温佃敏","subject":"外护"},{"teacher":"王琳","subject":"妇护"},{"teacher":"刘程程","subject":"儿护"},{"teacher":"杨海静","subject":"中护"},{"teacher":"王蓉","subject":"急救"},{"teacher":"崔雪艳","subject":"护理实训"}]},{"classId":"22级9班","courses":[{"teacher":"王金萍","subject":"中妇/饮食养生"},{"teacher":"刘群","subject":"中内"},{"teacher":"张晓新","subject":"养生康复/运动养生"},{"teacher":"姜志云","subject":"情志养生"},{"teacher":"陈功成","subject":"体育"}]},{"classId":"23级1班","courses":[{"teacher":"张岩","subject":"外语"},{"teacher":"杨春燕","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"柳聪颖","subject":"健评"},{"teacher":"满晓玲","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"柳聪颖","subject":"病理"},{"teacher":"刘旭","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于明艺","subject":"护管"},{"teacher":"安雯","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级2班","courses":[{"teacher":"林萍","subject":"外语"},{"teacher":"杨春燕","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"柳聪颖","subject":"健评"},{"teacher":"满晓玲","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"柳聪颖","subject":"病理"},{"teacher":"侯立娟","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"黄庭欢","subject":"护管"},{"teacher":"安雯","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级3班","courses":[{"teacher":"林萍","subject":"外语"},{"teacher":"李文丽","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"尹小艳","subject":"健评"},{"teacher":"满晓玲","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"柳聪颖","subject":"病理"},{"teacher":"侯立娟","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"黄庭欢","subject":"护管"},{"teacher":"安雯","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级4班","courses":[{"teacher":"林萍","subject":"外语"},{"teacher":"李文丽","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"尹小艳","subject":"健评"},{"teacher":"郭桂宇","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"侯立娟","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"黄庭欢","subject":"护管"},{"teacher":"崔娜","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级5班","courses":[{"teacher":"张荣荣","subject":"外语"},{"teacher":"李文丽","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"杨银田","subject":"健评"},{"teacher":"李玉萍","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"侯立娟","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于超然","subject":"护管"},{"teacher":"崔娜","subject":"精护"},{"teacher":"马晓璇","subject":"心理"}]},{"classId":"23级6班","courses":[{"teacher":"张荣荣","subject":"外语"},{"teacher":"李文丽","subject":"信息"},{"teacher":"陈功成","subject":"体育"},{"teacher":"王晓燕","subject":"健评"},{"teacher":"李玉萍","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"李雪","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于超然","subject":"护管"},{"teacher":"崔娜","subject":"精护"},{"teacher":"于超然","subject":"心理"}]},{"classId":"23级7班","courses":[{"teacher":"张荣荣","subject":"外语"},{"teacher":"王秀梅","subject":"信息"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"王晓燕","subject":"健评"},{"teacher":"郭桂宇","subject":"药理"},{"teacher":"原文娟","subject":"营养"},{"teacher":"柳聪颖","subject":"病理"},{"teacher":"李雪","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于超然","subject":"护管"},{"teacher":"李洁","subject":"精护"},{"teacher":"于超然","subject":"心理"}]},{"classId":"23级8班","courses":[{"teacher":"张岩","subject":"外语"},{"teacher":"王秀梅","subject":"信息"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"王晓燕","subject":"健评"},{"teacher":"陈欣悦","subject":"药理"},{"teacher":"宋荣荣","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"李雪","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于超然","subject":"护管"},{"teacher":"李洁","subject":"精护"},{"teacher":"于超然","subject":"心理"}]},{"classId":"23级9班","courses":[{"teacher":"卢静","subject":"外语"},{"teacher":"王一笑","subject":"信息"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"王晓燕","subject":"健评"},{"teacher":"陈欣悦","subject":"药理"},{"teacher":"宋荣荣","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"李雪","subject":"伦理法规"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"于明艺","subject":"护管"},{"teacher":"李洁","subject":"精护"},{"teacher":"于超然","subject":"心理"}]},{"classId":"23级10班","courses":[{"teacher":"王一笑","subject":"信息"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"宋荣荣","subject":"营养"},{"teacher":"路文梅","subject":"病理"},{"teacher":"毕思美","subject":"劳动"},{"teacher":"张晓新","subject":"小儿推拿/针灸"},{"teacher":"曹颖","subject":"方剂"}]},{"classId":"24级1班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"杨家明","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"于凯琳","subject":"英语"},{"teacher":"王道玮","subject":"体育"},{"teacher":"张英超","subject":"生化"},{"teacher":"颜美双","subject":"生理"},{"teacher":"刘翠翠","subject":"病原"},{"teacher":"聂圣娟","subject":"护基"}]},{"classId":"24级2班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"宋春意","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"丛珂","subject":"英语"},{"teacher":"王道玮","subject":"体育"},{"teacher":"张英超","subject":"生化"},{"teacher":"颜美双","subject":"生理"},{"teacher":"刘翠翠","subject":"病原"},{"teacher":"侯立娟","subject":"护基"}]},{"classId":"24级3班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"宋春意","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"丛珂","subject":"英语"},{"teacher":"姜志云","subject":"中医养生基础3班"},{"teacher":"颜美双","subject":"营养"},{"teacher":"曹颖","subject":"中药方剂"},{"teacher":"杜沅芷","subject":"经络"},{"teacher":"王金萍","subject":"中医临床医学"}]},{"classId":"24级4班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"杨家明","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"丛珂","subject":"英语"},{"teacher":"王道玮","subject":"体育"},{"teacher":"曹颖","subject":"中药方剂"},{"teacher":"郭桂宇","subject":"康复概论"},{"teacher":"姜志云","subject":"小儿推拿"},{"teacher":"刘翠翠","subject":"诊断学"}]},{"classId":"24级5班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"王一笑","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"刘群","subject":"中药方剂/养生康复"},{"teacher":"杜沅芷","subject":"经络"},{"teacher":"时福霞","subject":"常见病康复"},{"teacher":"张英超","subject":"疾病概要"},{"teacher":"姜志云","subject":"推拿"}]},{"classId":"24级6班","courses":[{"teacher":"刘鹏波","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"王淑英","subject":"护基"},{"teacher":"洪燕","subject":"内护"},{"teacher":"刘雯","subject":"外护"},{"teacher":"王琳","subject":"妇护"},{"teacher":"毕志伟","subject":"儿护"}]},{"classId":"24级7班","courses":[{"teacher":"周婉迪","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"王一笑","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"李雪","subject":"护基"},{"teacher":"刘静","subject":"内护"},{"teacher":"刘雯","subject":"外护"},{"teacher":"王琳","subject":"妇护"},{"teacher":"刘程程","subject":"儿护"}]},{"classId":"24级8班","courses":[{"teacher":"周婉迪","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"崔雪艳","subject":"护基"},{"teacher":"姜姝彤","subject":"内护"},{"teacher":"刘雯","subject":"外护"},{"teacher":"王婷婷","subject":"妇护"},{"teacher":"高颖","subject":"儿护"}]},{"classId":"24级9班","courses":[{"teacher":"周婉迪","subject":"哲学"},{"teacher":"李珍珠","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"张荣荣","subject":"日语"},{"teacher":"王蓉","subject":"生活照料"},{"teacher":"聂圣娟","subject":"技术护理"},{"teacher":"王威","subject":"老年评估"}]},{"classId":"25级1班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"周婉迪","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"林卫卫","subject":"英语"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"肖飞","subject":"物理"},{"teacher":"林卫卫","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"王建春","subject":"生物"},{"teacher":"周光","subject":"解剖"},{"teacher":"谢佳蕾","subject":"党史国史/国家安全教育/中特读本"}]},{"classId":"25级2班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"周婉迪","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"刘语钦","subject":"体育"},{"teacher":"肖飞","subject":"物理"},{"teacher":"林卫卫","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"孙宁宁","subject":"生物"},{"teacher":"张钰","subject":"解剖"},{"teacher":"谢佳蕾","subject":"党史国史/国家安全教育/中特读本"}]},{"classId":"25级3班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"张赛楠","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"肖飞","subject":"物理"},{"teacher":"杨羽佳","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"宋荣荣","subject":"生物"},{"teacher":"王威","subject":"解剖"},{"teacher":"谢佳蕾","subject":"党史国史/国家安全教育/中特读本"}]},{"classId":"25级4班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"张赛楠","subject":"语文"},{"teacher":"王子晗","subject":"数学"},{"teacher":"张悦桐","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"杨羽佳","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"谢佳蕾","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"杜沅芷","subject":"中医学基础"},{"teacher":"杨银田","subject":"解剖生理学基础"}]},{"classId":"25级5班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"杨家明","subject":"语文"},{"teacher":"王子晗","subject":"数学"},{"teacher":"卢静","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"杨羽佳","subject":"化学"},{"teacher":"王珺影","subject":"历史"},{"teacher":"郐恬瑶","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"杜沅芷","subject":"中医学基础"},{"teacher":"杨银田","subject":"解剖生理学基础"}]},{"classId":"25级6班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"宋春意","subject":"语文"},{"teacher":"邱文涵","subject":"数学"},{"teacher":"卢静","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"林卫卫","subject":"化学"},{"teacher":"李珍珠","subject":"历史"},{"teacher":"郐恬瑶","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"杜沅芷","subject":"中医学基础"},{"teacher":"杨银田","subject":"解剖生理学基础"}]},{"classId":"25级7班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"王玲玲","subject":"语文"},{"teacher":"张赛楠","subject":"语文"},{"teacher":"王一笑","subject":"数学"},{"teacher":"卢静","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"林卫卫","subject":"化学"},{"teacher":"李珍珠","subject":"历史"},{"teacher":"郐恬瑶","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"刘群","subject":"中医学基础"}]},{"classId":"25级8班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"王玲玲","subject":"语文"},{"teacher":"于群","subject":"数学"},{"teacher":"林卫卫","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"于凯琳","subject":"物理"},{"teacher":"于军良","subject":"化学"},{"teacher":"李珍珠","subject":"历史"},{"teacher":"郐恬瑶","subject":"党史国史/国家安全教育/中特读本"},{"teacher":"杨海静","subject":"老年人体结构与机能"},{"teacher":"马晓璇","subject":"老年人心理基础"}]},{"classId":"25级9班","courses":[{"teacher":"赵璐","subject":"中特"},{"teacher":"王玲玲","subject":"语文"},{"teacher":"王子晗","subject":"数学"},{"teacher":"李贇","subject":"英语"},{"teacher":"许正闯","subject":"体育"},{"teacher":"杨羽佳","subject":"化学"},{"teacher":"李珍珠","subject":"历史"},{"teacher":"尹小艳","subject":"解剖"},{"teacher":"毕思美","subject":"美术"},{"teacher":"李文丽","subject":"信息技术"},{"teacher":"杨海静","subject":"生理学基础"}]}]'),A=[{category:"一、德[矩阵量表题]",questions:[{id:"1",content:"衣着、言谈大方得体，举止文明，教态亲切。"},{id:"2",content:"老师对我们的评价以肯定鼓励表扬为主，使我们学习更有信心。"},{id:"3",content:"尊重每一个学生，处理事情让我心服口服，不偏不倚。"},{id:"4",content:"认真对待每一节课，上课时精神饱满，能够让我有所获。"}]},{category:"二、勤[矩阵量表题]",questions:[{id:"1",content:"教师按时上课，课前准备充分，引导我有序地学习。"},{id:"2",content:"经常和我们平等地交流，在学习和生活方面加以引导，对我们反映的问题认真对特，及时解决。"},{id:"3",content:"上课不迟到、不早退，中途不无故离开课堂，上课不抽烟，不接打电话。不坐着上课。"},{id:"4",content:"批改作业认真，并有批语。"}]},{category:"三、能[矩阵量表题]",questions:[{id:"1",content:"能有效管理学生并及时处理课堂突发事件，我们在课堂上秩序良好。"},{id:"2",content:"能及时发现我们在学习、生活等各方面的困难并帮助解决。"},{id:"3.1",content:"上课后，老师能引导我快速进入学习状态。"},{id:"3.2",content:"课上教师讲解清楚，普通话授课，语言准确、生动，同时使我们掌握学习的方法并能举一反三。"},{id:"3.3",content:"课堂内容丰富，技能操作规范、熟练。"},{id:"3.4",content:"每一节谍中，都有适合我参与的内容。"},{id:"3.5",content:"板书设计合理、工整，让我一目了然。"},{id:"3.6",content:"解答我的问题时耐心细致，经常鼓励我们。"},{id:"4",content:"具有良好的师生沟通能力，与学生关系融洽。"}]},{category:"四、导[矩阵量表题]",questions:[{id:"1",content:"引导我们热爱专业，树立高尚的职业道德观念。"},{id:"2",content:"引导我们树立健康的心态，增加学习兴趣。"},{id:"3",content:"引导我们进行有效的学习，提高学习效率。"}]}],je={class:"evaluation-container"},le={class:"form-item-wrapper"},ne={class:"form-item-wrapper"},ie={key:0,class:"evaluation-blocks"},de={class:"teacher-card-header"},ve={class:"teacher-info"},pe={class:"subject-badge"},me={class:"teacher-name"},fe={class:"score-value"},_e={class:"score-label"},ge={class:"questions-container"},Ie={class:"category-title"},we={class:"question-content"},ye={class:"question-id"},ke={class:"question-text"},$e={class:"teacher-card-footer"},Se={key:1,class:"submit-section"},Ce={__name:"Home",setup(Ne){const J=be(),n=ce(),L=se(),a=ae({classId:null,timestamp:Date.now(),studentName:"",time:""}),B=()=>{const t=new Date;a.time=`${t.getFullYear()}年${t.getMonth()+1}月${t.getDate()}日`},D=M(()=>{let t=0;return A.forEach(e=>{t+=e.questions.length}),t}),P=M(()=>x.map(t=>({label:t.classId,value:t.classId}))),r=z([]),d=z([]),o=z([]),U=()=>{d.value=r.value.map(()=>({})),o.value=r.value.map(()=>null)},R=t=>{const e=x.find(j=>j.classId===t);e&&(r.value=e.courses,U(),G()),C()},E=t=>t>=90?"优秀":t>=80?"良好":t>=70?"合格":"不合格",X=t=>t>=90?"success":t>=80?"info":t>=70?"warning":"error",F=t=>{const e=d.value[t],j=Object.values(e);if(j.length<D.value)return n.warning("请完成所有题目后再计算得分"),null;const s=j.reduce((y,m)=>y+m,0),u=Math.round(s/(D.value*5)*100);return o.value[t]=u,C(),n.success(`${r.value[t].teacher}老师得分：${u}分`),u},H=()=>{let t=!0;r.value.forEach((e,j)=>{F(j)===null&&(t=!1)}),t&&n.success("所有教师得分计算完成")},K=()=>{if(!a.classId)return n.error("请选择班级"),!1;if(!a.studentName.trim())return n.error("请输入学生姓名"),!1;for(let s=0;s<r.value.length;s++){const u=d.value[s];if(Object.keys(u).length<D.value)return n.error(`请完成 ${r.value[s].teacher} 老师的所有评教题目`),!1}H();const t={};let e=!1;if(o.value.forEach(s=>{s===100&&(e=!0),t[s]=(t[s]||0)+1}),e)return n.error("评教分数不能出现满分(100分)，请返回修改"),!1;for(const s in t)if(t[s]>=3)return n.error(`检测到有${t[s]}个教师得分相同(${s}分)，不能有三个及以上相同分数，请返回修改`),!1;const j=[];return o.value.forEach((s,u)=>{s<80&&j.push(r.value[u].teacher)}),j.length>0?(L.warning({title:"分数较低提醒",content:`系统检测到您给以下教师的打分较低（低于80分）：${j.join("、")}。请返回修改评分。`,positiveText:"返回修改",maskClosable:!1,closable:!1,onPositiveClick:()=>{}}),!1):!0},Q=async()=>{const t=await oe(()=>import("./xlsx-CNerDvZX.js"),[],import.meta.url),e=a.time,j=`${a.classId}${a.studentName}同学${e}评教.xlsx`,s=t.utils.book_new(),u=[];u.push(["班级",a.classId]),u.push(["学生姓名",a.studentName]),u.push(["评教时间",e]),u.push([]),r.value.forEach((i,g)=>{u.push([`【${i.subject} - ${i.teacher}】`]),A.forEach((N,I)=>{u.push([N.category]),N.questions.forEach(l=>{const k=`${I}-${l.id}`,$=d.value[g][k]||"未作答";u.push([`${l.id}. ${l.content}`,`${$}分`])})}),u.push([`得分: ${o.value[g]}分`,E(o.value[g])]),u.push([])});const y=t.utils.aoa_to_sheet(u);t.utils.book_append_sheet(s,y,"原始数据");const m=[["教师","科目","得分","等级"]];r.value.forEach((i,g)=>{m.push([i.teacher,i.subject,o.value[g],E(o.value[g])])});const V=t.utils.aoa_to_sheet(m);t.utils.book_append_sheet(s,V,"评教结果汇总"),t.writeFile(s,j)},Y=async()=>{if(K())try{await Q(),n.success("评教数据导出成功");const t={classId:a.classId,studentName:a.studentName,time:a.time,teacherCount:r.value.length};localStorage.setItem("evaluationResult",JSON.stringify(t)),localStorage.removeItem("teacherEvaluation"),J.push("/result")}catch(t){n.error("导出失败："+t.message)}},C=()=>{const t={formData:{...a},answers:d.value,scores:o.value,currentCourses:r.value};localStorage.setItem("teacherEvaluation",JSON.stringify(t))},G=()=>{const t=localStorage.getItem("teacherEvaluation");if(t)try{const e=JSON.parse(t);e.formData.classId===a.classId&&(Object.assign(a,e.formData),e.answers&&e.answers.length===r.value.length&&(d.value=e.answers),e.scores&&e.scores.length===r.value.length&&(o.value=e.scores))}catch(e){console.error("加载数据失败",e)}},W=()=>{const t=localStorage.getItem("teacherEvaluation");if(t)try{const e=JSON.parse(t);Object.assign(a,e.formData),e.currentCourses&&(r.value=e.currentCourses),e.answers&&(d.value=e.answers),e.scores&&(o.value=e.scores)}catch(e){console.error("初始化加载失败",e)}},Z=()=>{L.warning({title:"确认清除",content:"确定要清除所有评教数据吗？此操作不可恢复。",positiveText:"确定清除",negativeText:"取消",onPositiveClick:()=>{localStorage.removeItem("teacherEvaluation"),a.classId=null,a.timestamp=null,a.studentName="",a.time="",r.value=[],d.value=[],o.value=[],n.success("数据已清除")}})};return re(()=>{B(),W()}),(t,e)=>{const j=f("n-select"),s=f("n-gi"),u=f("n-input"),y=f("n-grid"),m=f("n-button"),V=f("n-card"),i=f("n-radio"),g=f("n-space"),N=f("n-radio-group");return p(),v("div",je,[e[13]||(e[13]=c("div",{class:"page-header"},[c("h1",{class:"page-title"},"教师评教系统"),c("p",{class:"page-subtitle"},"请认真、客观地完成教师评价")],-1)),h(V,{class:"header-card",bordered:!1},{footer:b(()=>[h(m,{text:"",type:"error",onClick:Z},{icon:b(()=>[...e[4]||(e[4]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16"},[c("path",{d:"M7 4V2h10v2h5v2h-2v15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6H2V4h5zM6 6v14h12V6H6zm3 3h2v8H9V9zm4 0h2v8h-2V9z"})],-1)])]),default:b(()=>[e[5]||(e[5]=_(" 清除所有数据 ",-1))]),_:1})]),default:b(()=>[h(y,{cols:1,"x-gap":12,"y-gap":16,responsive:"screen","collapsed-rows":2},{default:b(()=>[h(s,{span:1},{default:b(()=>[c("div",le,[e[2]||(e[2]=c("label",{class:"form-label"},[c("span",{class:"label-text"},"选择班级"),c("span",{class:"label-required"},"*")],-1)),h(j,{value:a.classId,"onUpdate:value":[e[0]||(e[0]=I=>a.classId=I),R],options:P.value,placeholder:"请选择班级",filterable:"",size:"large"},null,8,["value","options"])])]),_:1}),h(s,{span:1},{default:b(()=>[c("div",ne,[e[3]||(e[3]=c("label",{class:"form-label"},[c("span",{class:"label-text"},"学生姓名"),c("span",{class:"label-required"},"*")],-1)),h(u,{value:a.studentName,"onUpdate:value":[e[1]||(e[1]=I=>a.studentName=I),C],placeholder:"请输入姓名",size:"large"},null,8,["value"])])]),_:1})]),_:1})]),_:1}),r.value.length>0?(p(),v("div",ie,[(p(!0),v(T,null,q(r.value,(I,l)=>(p(),v("div",{key:l,class:"teacher-card"},[c("div",de,[c("div",ve,[c("span",pe,w(I.subject),1),c("span",me,w(I.teacher),1)]),o.value[l]!==null?(p(),v("div",{key:0,class:ue(["score-display",`score-${X(o.value[l])}`])},[c("span",fe,w(o.value[l]),1),c("span",_e,w(E(o.value[l])),1)],2)):O("",!0)]),c("div",ge,[(p(!0),v(T,null,q(he(A),(k,$)=>(p(),v("div",{key:$,class:"category-block"},[c("div",Ie,w(k.category),1),(p(!0),v(T,null,q(k.questions,S=>(p(),v("div",{key:S.id,class:"question-item"},[c("div",we,[c("span",ye,w(S.id)+".",1),c("span",ke,w(S.content),1)]),h(N,{value:d.value[l][`${$}-${S.id}`],"onUpdate:value":[ee=>d.value[l][`${$}-${S.id}`]=ee,C],class:"radio-group"},{default:b(()=>[h(g,{size:8},{default:b(()=>[h(i,{value:1,class:"score-radio"},{default:b(()=>[...e[6]||(e[6]=[_("1分",-1)])]),_:1}),h(i,{value:2,class:"score-radio"},{default:b(()=>[...e[7]||(e[7]=[_("2分",-1)])]),_:1}),h(i,{value:3,class:"score-radio"},{default:b(()=>[...e[8]||(e[8]=[_("3分",-1)])]),_:1}),h(i,{value:4,class:"score-radio"},{default:b(()=>[...e[9]||(e[9]=[_("4分",-1)])]),_:1}),h(i,{value:5,class:"score-radio"},{default:b(()=>[...e[10]||(e[10]=[_("5分",-1)])]),_:1})]),_:1})]),_:1},8,["value","onUpdate:value"])]))),128))]))),128))]),c("div",$e,[h(m,{type:"primary",size:"large",block:"",onClick:k=>F(l)},{default:b(()=>[_(" 计算"+w(r.value[l].teacher)+"老师得分 ",1)]),_:2},1032,["onClick"])])]))),128))])):O("",!0),r.value.length>0?(p(),v("div",Se,[h(m,{type:"warning",size:"large",block:"",onClick:H,class:"submit-button"},{default:b(()=>[...e[11]||(e[11]=[_(" 计算所有教师得分 ",-1)])]),_:1}),h(m,{type:"primary",size:"large",block:"",onClick:Y,class:"submit-button submit-button-main"},{default:b(()=>[...e[12]||(e[12]=[_(" 提交并导出评教数据 ",-1)])]),_:1})])):O("",!0)])}}},Ee=te(Ce,[["__scopeId","data-v-49a700e3"]]);export{Ee as default};
